# 19.06.2023 г.
[X] Кнопка во всю ячейку + функционал на нее
    - В ячейку вставлена кнопка размером с ячейку, при тапе на которую реализуется функционал работы с тегом

[X] searchText.loweCased() сделать один раз
[X] не обновлять поиск пока не начнешь вводить текст
[X] Убрать тире в пути ячейки
    - Реализовано

[ ] оптимизировать метод openObject на MapVC

# 13.06.2023 г.
[X] Поменять метод определения зума при подсветке объекта
    - Метод изменен на mapZoom(for: bbox, viewSize). 
[X] Удалить кнопки-лампочки
    - Удалено на SAvedVC и SelectVC. Подсветка объекта осуществляется при переходе на него в режим редактирования

[X] Изменить действие при тапе на ячейку при редактировании объекта
    - Реализовано немного по другому. Из существующих видов выпадающего меню, кроме кнопки не подходит никакой.
    UIMenuController - отображает меню в горизонтальном виде.
    UIContextMenuIteraction вызывается только при долгом тапе на ячейку, что не очевидно для юзера.
    Передать тап на кнопку запрещает iOS в целях безопасности.
    Реализована следующая логика - при тапе на ячейку открывается окно ручного ввода текста, при тапе на кнопку действие в зависимости от тега.
[X] Редактирование ранее введенного тега по тапу
    - Реализовано

[X] SearchController в пресетах
    - Реализовано. Идет поиск по именам пресетов, работает быстрый выбор пресета, реализована подсветка существующего пресета.
    - Добавлено отображение пути отфильтрованного пресета (т.к. есть одинаковые имена)
    
### Реализовано дополнительно:
[X] Новые теги объекта перенесены из синглтона в EditObjectVC.
    Это соответствует принципу разделения данных между объектами. Столкнулся с проблемой обновления объекта на EditVC - в зависимости от скорости выполнения операции теги одного объекта присваивались новому.
    Разделение данных по контроллерам решило проблему.
[X] Подсветка тапнуго объекта реализована через синглтон
    Это позволяет не пробрасывать делегаты через несколько контроллеров и легко обновлять данные в EditVC. При деинициализации EditVC подсвеченный объект обнуляется в синглтоне, что ведет к его удалению на карте.
[X] Решена проблема с отображанием созданного объекта на карте.
[X] Проработана логика открытия контроллеров при тапах по объектам
    Прописаны все варианты открытия контроллеров, реализовано в коде.

# 05.06.2023 г.
[X] Снятие подсветки при уходе с EditObjectVC на SelectObjectVC
    - Реализован метод делегата, удаляющий подсветку

[X] Возвращать зум при уходе с SelectObjectVC
    Проделана большая работа в мелочах на MapVC:
    - Реализована корректная работа зума: если зум объекта меньше чем исходный, зум карты уменьшается. Если пользователь в процессе работы на другом контроллее меняет зум, он также сохраняется;
##         уточнить верно ли обнуляется замыкание
    - Реализован алгоритм перезаписывания lastBbox если пользователь в процессе выбора объекта изменил его;
    - Блоки анимации карты после сворачивания navControllera переделаны с использованием completition, подсветка объектов убирается после окончания анимации, чтобы пользователь не терял их зрительно;
    - Реализиовано анимированное обновление объектов на SelectVC если пользователь тапнул по другим объектам;
    - Правки в стилях векторных слоев
    - Добавлена рамка загруженного bbox (мне кажется так нагляднее пользователю)
    
    - Изменен размер кнопок
    - Изменен способ создания точки - добавлена кнопка рисования, реализована анимация, реализована логика работы

[X] опечатки на MainSettingsVC + иконки
    - Опечатки исправлены
    - Иконки перезагружены
    - Тап по ячейке ведет к переходу на сайт

[X] Корректно обрарабывать тапы по полигонам
    - Фикс фреймворка, тапы рядом с полигоном срабатывают на нем.
    - При тапе по полигону получается его граница в виде линии и проверяется близость тапа к ней. 
    
### Реализовано дополнительно:
    - Унифицирован дизайн ячейки на контроллере редактирования (кнопки выглядят одинаково);
    - Добавлен удобный спосооб ввода текстового значения тега
    - Добавлен пунк "редактировать" в разделе заполненных тегов по свайпу ячейки

# 03.06.2023 г.
[X] Работать с полигонами
    - Реализована работа с полигонами (Relation)
    - Векторные объекты сохраняются в OSMAnyObject, что позволяет не хранить исходные данные линий и мультиполигонов для последующего создания векторного объекта (для подсветки)
[X] Проработать пресеты по зданиям
    - В ручном режиме добавлены пресеты зданий
    
[X] Обновлять тулбар если объекты не выбраны
[X] Автоматически выбирать все объекты при входе в контроллер
    - Реализовано

# 01.06.2023 г.
[X] Использовать временные файлы в загрузке и индексации объектов
[X] Оптимизировать использование lock.lock()
    - Реализовано. Парсер изменен с XMLCoder на построчный

[X] Подправить стили
    - Реализовано. Изменил границу зума на 17
    
[X] Версию приложения при открытии ченджесета брать автоматически
[X] Поле для комментария сделать через UITextField, при каждом тапе на выбор объекта обновляьть placeHolder через генерацию комментария
[X] Название для поля ввода комментария - Comment
    - Реализовано

[X] Mark to deletion -> Discard changes
    - Реализовано. Контроллер определяет откуда мы пришли на него и настраивает тулбар
------------
Невыполненные ранее:
[ ] Отредактировать инструкцию

# 29.05.2023 г.
[ ] Отредактировать инструкцию
[X] Номер билда подставлять автоматически
    - Реализовано

[X] изменить название в SavedNodesVC + по тапу - в редактирование объекта
    - title = "Changeset" и по тапу - в редактирование объекта
[X] Проверить вызов клавиатуры при вводе комментария
    - Бага с вызовом клавиатуры при вводе комментария решена - отказался от всплывающей вьюхи в пользу обычного UITextField, сделал placeHolder и кнопку очистки. При отправке объектов, в случае пустого поля комментарий генерируется автоматически. Так же при пустом поле, в случае нажатия кнопки "выбрать все объекты" комментарий генерируется и подставляется автоматически
[X] изменить стиль карты при уменьшении зума
    - Реализовано. Изменен стиль объектов до 15 зума и с 15
[X] изменить загрузку данных с 9 потоков на 1 задачу, в случае ошибки разбивать bbox
    - Проделана большая работа:
    1) Реализован механизм отмены ранее запущенной задачи;
    2) Реализован механизм нормальной работы с переменными при выполнении нескольких задач;
    3) Реализован проброс ошибок в случае ошибки подгрузки данных;
    4) Реализован механизм определения старта новой загрузки и отмены предыдущей;
    5) При вызове каких либо контроллеров mapOrigin плавно смещается на 0.5-0.75 и обратно;
    6) Режим загрузки данных изменен с "загрузки по тапу" на "включение/выключение автоматической подгрузки", налажен контроль за зумом, чтобы при мелких масштабах не подгружать данные, т.к. очевидно что юзер не будет мапить на таких масштабах, или делать это не правильно.
    7) Работа с картой осуществляется с MapClient'а через протокол.
    8) Добавлена обработка ошибки - превышен лимит объектов в запросе

#  22.05.2023 г.

[X] Все изменения направлять в ченджсет, отправлять данные только оттуда
[X] Проработать алгоритм хранения объектов помеченных для удаления
[X] генерировать комментарий сразу, не дожидаясь нажатия пользователя
    - Реализовано. Улучшена отрисовка ячеек таблицы. Добавлена возможность помечать объекты к удалению. Экран сохраненных точек стал по сути экраном управления пакетом правок. Переработан InfoObjectVC, на нем отображается вспомогательная информация об объекте.
    Добавлена заметная анимация на счетчик (и сам счетчик) объектов в пакете правок.
    Добавлена возможность ввода комментария к ченджсету и автоматическая его генерация.

[?] Номер билда брать атвоматически
    - Автоматическое взятие билда всегда выдает еденицу, как его правильно брать в коде? 
    if let buildNumber = Bundle.main.object(forInfoDictionaryKey: "CFBundleVersion") as? String {
        print("Номер билда приложения: \(buildNumber)")
    }


[X] Изменить алгоритм поиска min & max lat & lon при вычислении bbox (при загрузке данных)
    - Расчет bbox берется из центра экрана и к нему добавляются экспериментально подобранные размеры bbox. В связи с переходом на новый режим загрузки данных, вычисление размеров экрана потеряло смысл, т.к. позволяет отказаться от отслеживания зумов и размера bbox
[X] Изменить алгоритм загрузки данных (9 bbox)
    - Частично реализовано. При старте загрузки подгружается 9 bbox, создается объект GLMapDrawble и передается на MapVC из класса MapClient.
    Метода работы с картой перенесены в MapClient, вьюконтроллер сильно уменьшился в размерах.
[?] Как отменить запущенные задачи или как начать загрузку данных только в тот момент, когда пользователь перестал перемещать карту?
[?] Как пробрасывать ошибки в группе задач, если из 9 задач 1 или 2 бросят ошибку?
    
[ ] getNodesFromXML перевести на global().async 

[X] выровнять отступы чекбокса на MultiSelectVC
    - отступ справа сделан как остальных экранах
    
Дополнительно:
[X] Внешний вид контроллера выбора объекта после тапа по нескольким объектам унифицирован с SavedNodesVC, добавлено автоматическое определение высоты строки
